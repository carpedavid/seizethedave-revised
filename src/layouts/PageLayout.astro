---
import "../styles/global.css"
import SiteOptions from "../site.config.mjs"
import Header from "../components/Header.astro"
import Footer from "../components/Footer.astro"

const { frontmatter } = Astro.props;

const formattedDate = new Intl.DateTimeFormat("en-US", {
  year: "numeric",
  month: "long",
  day: "numeric",
}).format(new Date(frontmatter.pubDate))
---

<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={frontmatter.description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:title" content={frontmatter.title} />
    <meta property="og:description" content={frontmatter.description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.url} />
    <meta property="og:site_name" content={SiteOptions.siteTitle} />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content={frontmatter.title} />
    <meta name="twitter:description" content={frontmatter.description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{frontmatter.title}</title>
    <script is:inline>
      // Theme initialization - prevents FOUC
      ;(() => {
        const theme = localStorage.getItem("theme") ?? (matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light")

        document.documentElement.classList.toggle("dark", theme === "dark")
      })()
    </script>
    {SiteOptions.gTag && (
      <script
        data-category="analytics"
        is:inline
        type="text/partytown"
        src={`https://www.googletagmanager.com/gtag/js?id=${SiteOptions.gTag}`}
      ></script>

      <script data-category="analytics" is:inline type="text/partytown" define:vars={{gTag: SiteOptions.gTag}}>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
          dataLayer.push(arguments);
        }
        gtag("js", new Date());

        gtag("config", gTag);
      </script>
    )}
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@algolia/algoliasearch-netlify-frontend@1/dist/algoliasearchNetlify.css" />
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@algolia/algoliasearch-netlify-frontend@1/dist/algoliasearchNetlify.js"></script>
  <script type="text/javascript">
    algoliasearchNetlify({
      appId: 'Y46VPHWIO9',
      apiKey: 'e2d2b67508d8f1b99d4444943029c753',
      siteId: '4c7dba9e-b76d-4f5f-9e0c-8accb00668b0',
      branch: 'main',
      selector: 'div#search',
    });
  </script>
  </head>

  <body class="bg-white text-gray-900 dark:bg-slate-900 dark:text-slate-200 transition-colors duration-300 min-h-full">
    <main class={`max-w-[1100px] mx-auto px-4`}>
      <Header showTitle={true} />

      <!-- Light Horizontal Bar -->
      <hr class="border-t border-gray-200 dark:border-gray-700 my-8" />

      <!-- Page Header -->
      <header class="mb-12 text-center">
        <h1
          class="text-4xl font-bold tracking-tight mb-4 text-gray-900 dark:text-slate-100"
        >
          {frontmatter.title}
        </h1>
        <p>Updated {formattedDate}</p>
      </header>

      <article class="mt-10 prose prose-h2:text-2xl prose-lg max-w-none text-gray-700 dark:prose-strong:text-slate-100 dark:text-slate-300 prose-headings:text-gray-900 dark:prose-headings:text-slate-100 prose-a:text-blue-600 dark:prose-a:text-blue-400 prose-code:text-slate-700 dark:prose-code:text-slate-100 prose-pre:bg-gray-100 dark:prose-pre:bg-slate-800 prose-blockquote:border-gray-300 dark:prose-blockquote:border-gray-600 prose-blockquote:text-gray-600 dark:prose-blockquote:text-gray-400 prose-h3:text-[1.2em] ">
          <slot />
      </article>

      <!-- Back to Home -->
      <div class="mt-12 text-center">
        <a
          href="/"
          class="inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-slate-100 transition-colors"
        >
          <svg
            class="w-4 h-4 mr-2"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
          </svg>
          Back to Home
        </a>
      </div>

      <!-- Minimal Footer -->
      <Footer />
    </main>
    <script is:inline src="/scripts/theme-toggle.js"></script>
  </body>
</html>

<style>
  @view-transition {
    navigation: auto;
  }
</style>

